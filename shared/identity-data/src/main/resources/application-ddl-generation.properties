# Application properties for DDL generation profile
# This profile is used during build to generate DDL and create migrations
# 
# DDL generation is a persistence layer concern and belongs in the identity-data module.

# Disable web application startup
spring.main.web-application-type=none
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration

# Use H2 in-memory database for DDL generation
spring.datasource.url=jdbc:h2:mem:ddlgen;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA Configuration for DDL generation
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# DDL Generation Settings
spring.jpa.properties.javax.persistence.schema-generation.scripts.action=create
spring.jpa.properties.javax.persistence.schema-generation.scripts.create-target=target/generated-ddl/create-auto.sql
spring.jpa.properties.javax.persistence.schema-generation.scripts.drop-target=target/generated-ddl/drop-auto.sql

# yaGen Configuration for DDL generation
yagen.auto-migration.enabled=true
spring.jpa.properties.yagen.generator.output.dir=target/generated-ddl
spring.jpa.properties.yagen.generator.history.enabled=true
spring.jpa.properties.yagen.generator.history.suffix=_HST
spring.jpa.properties.yagen.generator.history.mode=AUTO

# yaGen DDL Generation Settings
spring.jpa.properties.yagen.generator.ddl.createDDL=true
spring.jpa.properties.yagen.generator.ddl.dropDDL=false

# Disable other components during DDL generation
spring.quartz.auto-startup=false
management.endpoints.enabled-by-default=false

# Logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.tool.schema=DEBUG
logging.level.com.github.gekoh.yagen=DEBUG
logging.level.org.identityshelf.ddl=INFO

# Flyway settings (disabled during DDL generation)
spring.flyway.enabled=false
